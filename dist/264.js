"use strict";(globalThis.webpackChunkblock_revealer=globalThis.webpackChunkblock_revealer||[]).push([[264],{264:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});class r{constructor(){this.colors={blue:"#1989c1",white:"#b1b1b1",black:"#444343"}}findColor(e){let t=this.colors;return Object.keys(t).forEach((o=>{if(e===t[o])return o})),""}}var s=o(196);class l{constructor(){}init({reveal:e=!1,color:t="blue"}){this.setPluginClass("wp-block-revealer"),this.setColor(t),this.setReveal(e),this.bodyNodeObserver(),this.storage=new s.A,this.colors=new r}bodyNodeObserver(){let e=this.domBody();e&&new MutationObserver(((e,t)=>{for(let t of e){let e=getComputedStyle(t.target).getPropertyValue("--wpbr--editor--shadow--color"),o=this.colors.findColor(e);"attributes"===t.type&&"class"===t.attributeName&&(o!==this.storage.getColor()&&this.setColor(this.storage.getColor()),!0!==this.storage.getReveal()||t.target.classList.contains("wp-block-revealer--reveal")||this.setReveal(this.storage.getReveal()),!1===this.storage.getReveal()&&t.target.classList.contains("wp-block-revealer--reveal")&&this.setReveal(this.storage.getReveal()))}})).observe(e,{attributes:!0,childList:!0,subtree:!0})}getBody(){return this.domBody()}isPostEditorIframe(){return!document.querySelector(".block-editor-writing-flow")}domBody(){let e=null,t=this.isPostEditorIframe()?document.querySelector('iframe[name="editor-canvas"]'):document.querySelector(".block-editor-writing-flow");return t&&this.isPostEditorIframe()&&(e=t.contentWindow.document.body),t&&!this.isPostEditorIframe()&&(e=document.querySelector("body")),e}setPluginClass(e){let t=this.domBody();t&&t.classList.add(e)}setColor(e){let t=this.domBody();t.style.setProperty("--wpbr--editor--shadow--color","var( --wpbr--color--"+e+" )"),t.style.setProperty("--wpbr--editor--shadow--color-hover","var( --wpbr--color--"+e+"-hover )")}setReveal(e){let t=this.domBody();e?t.classList.add("wp-block-revealer--reveal"):t.classList.remove("wp-block-revealer--reveal")}}},196:(e,t,o)=>{o.d(t,{A:()=>r});class r{constructor(){}getColor(){return window.localStorage.getItem("wpbr_options__color")}getReveal(){return"true"===window.localStorage.getItem("wpbr_options__reveal")}setColor(e){window.localStorage.setItem("wpbr_options__color",e)}setReveal(e){let t=!0===e?"true":"false";window.localStorage.setItem("wpbr_options__reveal",t)}}}}]);