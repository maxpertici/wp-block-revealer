{"version":3,"file":"src_js_KeyboardShortcuts_js.js","mappings":"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","sources":["webpack://block-revealer/./src/js/Colors.js","webpack://block-revealer/./src/js/Editor.js","webpack://block-revealer/./src/js/GlobalSignal.js","webpack://block-revealer/./src/js/KeyboardShortcuts.js","webpack://block-revealer/./src/js/LocalStorage.js"],"sourcesContent":["\nexport default class Colors {\n\n\tconstructor() {\n\n\t\tthis.colors = {\n\t\t\t\"blue\" : \"#1989c1\",\n\t\t\t\"white\" : \"#b1b1b1\",\n\t\t\t\"black\" : \"#444343\"\n\t\t}\n\t}\n\n\n\tfindColor( hex ){\n\n\n\t\tlet colors = this.colors ;\n\t\tObject.keys( colors ).forEach(key=>{\n\t\t\tif( hex === colors[key] ){ return key ; }\n\t\t})\n\n\t\treturn '' ;\n\n\t}\n\n}","\nimport Colors from \"./Colors.js\";\n\nimport LocalStorage from \"./LocalStorage.js\";\n\nexport default class Editor {\n\tconstructor(){}\n\n\tinit( { reveal = false, color= 'blue' } ){\n\t\tthis.setPluginClass('wp-block-revealer');\n\t\tthis.setColor( color );\n\t\tthis.setReveal( reveal );\n\t\tthis.bodyNodeObserver();\n\t\tthis.storage = new LocalStorage();\n\t\tthis.colors = new Colors();\n\t}\n\n\tbodyNodeObserver(){\n\t\tlet body = this.domBody();\n\n\t\tif( body ){\n\t\t\tlet observer = new MutationObserver( (mutationsList, observer) => {\n\n\t\t\t\tfor( let mutation of mutationsList ){\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Compare class with storage values\n\t\t\t\t\t */\n\n\t\t\t\t\tlet styles = getComputedStyle(mutation.target);\n\t\t\t\t\tlet color = styles.getPropertyValue('--wpbr--editor--shadow--color');\n\t\t\t\t\tlet colore_name = this.colors.findColor( color ) ;\n\n\t\t\t\t\tif( mutation.type === 'attributes' && mutation.attributeName === 'class' ){\n\n\t\t\t\t\t\t// Color\n\t\t\t\t\t\tif( colore_name !== this.storage.getColor() ){\n\t\t\t\t\t\t\tthis.setColor( this.storage.getColor() );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Reveal\n\t\t\t\t\t\t// mutation.target.classList.add('wp-block-revealer');\n\n\t\t\t\t\t\tif( true === this.storage.getReveal() && ! mutation.target.classList.contains('wp-block-revealer--reveal') ){\n\t\t\t\t\t\t\tthis.setReveal( this.storage.getReveal() );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( false === this.storage.getReveal() && mutation.target.classList.contains('wp-block-revealer--reveal') ){\n\t\t\t\t\t\t\tthis.setReveal( this.storage.getReveal() );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tobserver.observe(body, { attributes: true, childList: true, subtree: true });\n\t\t}\n\n\t}\n\n\tgetBody(){\n\t\treturn this.domBody();\n\t}\n\n\tisPostEditorIframe(){\n\t\treturn document.querySelector('.block-editor-writing-flow') ? false : true ;\n\t}\n\n\tdomBody(){\n\n\t\tlet body= null ;\n\t\tlet node = this.isPostEditorIframe() ? document.querySelector('iframe[name=\"editor-canvas\"]')  :  document.querySelector('.block-editor-writing-flow') ;\n\n\t\tif( node && this.isPostEditorIframe() ){\n\t\t\tbody = node.contentWindow.document.body ;\n\t\t}\n\n\t\tif( node && ! this.isPostEditorIframe() ){\n\t\t\tbody = document.querySelector('body') ;\n\t\t}\n\n\t\treturn body ;\n\t}\n\n\tsetPluginClass( className ){\n\n\t\tlet body = this.domBody();\n\n\t\tif( body ){\n\t\t\tbody.classList.add( className );\n\t\t}\n\t}\n\n\tsetColor( color ){\n\n\t\tlet body = this.domBody();\n\n\t\tbody.style.setProperty('--wpbr--editor--shadow--color', 'var( --wpbr--color--'+color+' )' );\n\t\tbody.style.setProperty('--wpbr--editor--shadow--color-hover', 'var( --wpbr--color--'+color+'-hover )' );\n\t}\n\n\tsetReveal( reveal ){\n\n\t\tlet body = this.domBody();\n\n\t\tif( reveal ){\n\t\t\tbody.classList.add('wp-block-revealer--reveal');\n\t\t}else{\n\t\t\tbody.classList.remove('wp-block-revealer--reveal');\n\t\t}\n\t}\n\n\n\n}","\nimport { signal } from \"@preact/signals-react\";\n\nimport LocalStorage from \"./LocalStorage.js\";\n\nconst storage = new LocalStorage();\n\n\nconst GlobalSignalReveal = signal(storage.getReveal() ) ;\nconst GlobalSignalColor = signal(storage.getColor() ) ;\n\nexport { GlobalSignalReveal, GlobalSignalColor }","/**\n * KeyboardShortcuts\n */\n\nimport Editor from './Editor.js';\n\nimport { GlobalSignalReveal, GlobalSignalColor } from \"./GlobalSignal.js\";\n\nexport default class KeyboardShortcuts {\n\n\tconstructor() {}\n\n\tbind(){\n\n\t\tlet editor = new Editor();\n\n\t\t// Ctrl + Alt + R\n\t\t// https://www.delftstack.com/howto/javascript/javascript-keyboard-shortcut/\n\n\n\t\t// body\n\t\teditor.getBody().addEventListener( 'keydown', ( e ) => {\n\n\t\t\t// console.log( 'shortcut' );\n\t\t\t// console.log(e);\n\n\t\t\tif( e.ctrlKey && e.altKey && e.keyCode === 82 ){\n\t\t\t\tGlobalSignalReveal.value = !GlobalSignalReveal.value;\n\t\t\t}\n\t\t} ) ;\n\n\t\t// document\n\t\tif( document.body !== editor.getBody() ){\n\n\t\t\tdocument.addEventListener( 'keydown', ( e ) => {\n\n\t\t\t\tif( e.ctrlKey && e.altKey && e.keyCode === 82 ){\n\t\t\t\t\tGlobalSignalReveal.value = !GlobalSignalReveal.value;\n\t\t\t\t}\n\t\t\t} ) ;\n\t\t}\n\t}\n\n}","\nexport default class LocalStorage {\n\n\tconstructor(){}\n\n\tgetColor(){\n\t\treturn window.localStorage.getItem( 'wpbr_options__color' );\n\t}\n\n\tgetReveal(){\n\t\treturn window.localStorage.getItem( 'wpbr_options__reveal' ) === 'true' ? true : false ;\n\t}\n\n\tsetColor( color ){\n\t\t// console.log( 'setColor', color );\n\t\twindow.localStorage.setItem( 'wpbr_options__color', color );\n\t}\n\n\n\tsetReveal( reveal ){\n\n\t\tlet revealValue = reveal === true ? 'true' : 'false' ;\n\t\twindow.localStorage.setItem( 'wpbr_options__reveal', revealValue );\n\t}\n}"],"names":["Colors","constructor","colors","findColor","hex","Object","keys","forEach","key","LocalStorage","Editor","init","reveal","color","setPluginClass","setColor","setReveal","bodyNodeObserver","storage","body","domBody","observer","MutationObserver","mutationsList","mutation","styles","getComputedStyle","target","getPropertyValue","colore_name","type","attributeName","getColor","getReveal","classList","contains","observe","attributes","childList","subtree","getBody","isPostEditorIframe","document","querySelector","node","contentWindow","className","add","style","setProperty","remove","signal","GlobalSignalReveal","GlobalSignalColor","KeyboardShortcuts","bind","editor","addEventListener","e","ctrlKey","altKey","keyCode","value","window","localStorage","getItem","setItem","revealValue"],"sourceRoot":""}